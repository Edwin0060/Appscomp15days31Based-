<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_product_qweb_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <center>
                        <h2>
                            <span>POS Product Report</span>
                        </h2>
                    </center>
                    <br></br>
                    <div class="row">
                        <div class="col-4">
                            <span style="font-size: 16px;">
                                <b>Start Date</b>
                            </span>
                            <strong class="px-2">:</strong>
                            <span t-esc="datetime.datetime.strptime(start_date, '%Y-%m-%d').strftime('%d-%m-%Y')"/>
                        </div>
                        <div class="col-4">
                            <span style="font-size: 16px;">
                                <b>End Date</b>
                            </span>
                            <strong class="px-2">:</strong>
                            <span t-esc="datetime.datetime.strptime(end_date, '%Y-%m-%d').strftime('%d-%m-%Y')"/>
                        </div>
                        <div>
                            <span style="font-size: 16px;">
                                <b>Generated By</b>
                            </span>
                            <strong class="px-2">:</strong>
                            <span t-field="res_company.env.user.name"/>
                        </div>
                    </div>
                    <br></br>
                    <br></br>
                    <t t-if="product_selection == 'all_products'">
                        <table class="table table-sm table-bordered"
                               style="border:1px solid black;font-size:14px;border-spacing: 1em 0.5em; padding: 0 2em 1em 0; border: 1px solid black;border-radius:2px;text-align: center;">
                            <th class="text-center bg-secondary text-white" style="width: 3%;font-weight:bold">Sl.No.
                            </th>
                            <th class="text-center bg-secondary text-white" style="width: 10%;font-weight:bold">
                                Product
                            </th>
                            <th class="text-center bg-secondary text-white" style="width: 8%;font-weight:bold">
                                Total Quantity
                            </th>
                            <tbody>
                                <t t-foreach="orginal" t-as="product">
                                    <tr>
                                        <td width="3%" class="text-center">
                                            <span t-esc="product_index+1"/>
                                        </td>
                                        <td class="text-left">
                                            <t t-if="product">
                                                <span t-esc="product['name']"/>
                                            </t>
                                        </td>
                                        <td class="text-right">
                                            <t t-if="product">
                                                <span t-esc="product['qty']"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </t>
                    <br/>
                    <t t-if="product_selection == 'products'">
                        <div class="row">
                            <table class="table table-sm table-bordered "
                                   style="font-size:15px;">
                                <thead class="thead-light p-3 mb-2">
                                    <th class="text-center bg-secondary text-white  p-3 mb-2"
                                        style="width: 3%;font-weight:bold">Sl.No
                                    </th>
                                    <th class="text-center bg-secondary text-white  p-3 mb-2"
                                        style="width: 10%;font-weight:bold">Product
                                    </th>
                                    <th class="text-center bg-secondary text-white  p-3 mb-2"
                                        style="width: 8%;font-weight:bold">Quantity
                                    </th>
                                    <th class="text-center bg-secondary text-white p-3 mb-2"
                                        style="width: 8%;font-weight:bold">Unit Price
                                    </th>
                                    <th class="text-center bg-secondary text-white p-3 mb-2"
                                        style="width: 8%;font-weight:bold">Total
                                    </th>
                                </thead>
                                <t t-foreach="date_product" t-as="dates">
                                    <tr>
                                        <td colspan="5" class="text-center text-dark  text-dark"
                                            style="font-weight:bold;font-size:17px;background-color: #CDCDCD">
                                            <t t-if="dates">
                                                <strong>
                                                    <span t-esc="list(dates.keys())[0]"/>
                                                </strong>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr>
                                        <t t-if="dates">
                                            <td class="text-center">
                                                <t t-foreach="list(dates.values())[0]" t-as="name">
                                                    <span t-esc="name_index+1"/>
                                                    <br/>
                                                </t>
                                            </td>
                                        </t>
                                        <t>
                                            <t t-if="dates">
                                                <td>
                                                    <t t-foreach="list(dates.values())[0]" t-as="name">
                                                        <span t-esc="name['name']"/>
                                                        <br/>
                                                    </t>
                                                </td>
                                            </t>
                                        </t>
                                        <t>
                                            <t t-if="dates">
                                                <td class="text-right">
                                                    <t t-foreach="list(dates.values())[0]" t-as="name">
                                                        <span t-esc="name['qty']"/>
                                                        <br/>
                                                    </t>
                                                </td>
                                            </t>
                                        </t>
                                        <t>
                                            <t t-if="dates">
                                                <td class="text-right">
                                                    <t t-foreach="list(dates.values())[0]" t-as="name">
                                                        <span t-field="res_company.currency_id.symbol"/>
                                                        <span t-esc="name['price_unit']"/>
                                                        <br/>
                                                    </t>
                                                </td>
                                            </t>
                                        </t>
                                        <t>
                                            <t t-if="dates">
                                                <td class="text-right">
                                                    <t t-foreach="list(dates.values())[0]" t-as="name">
                                                        <span t-field="res_company.currency_id.symbol"/>
                                                        <span t-esc="name['subtotal']"/>
                                                        <br/>
                                                    </t>
                                                </td>
                                            </t>
                                        </t>
                                    </tr>
                                </t>
                            </table>
                        </div>
                    </t>

                    <div class="footer" align="right" style="margin-top: 10px;font-size:14px">
                        <div class="text-center" align="center">
                            <br/>
                            <br/>
                            <br/>
                            <div class="row">
                                <div class="col-3">
                                    <strong>Prepared By</strong>
                                </div>
                                <div class="col-4">
                                    <strong>Authorized By</strong>
                                </div>
                                <div class="col-4">
                                    <strong>Approved By</strong>
                                </div>
                            </div>
                            <br/>
                            Page
                            <span class="page"/>
                            of
                            <span class="topage"/>
                            Print Date
                            <strong class="px-2">:</strong>
                            <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d-%m-%Y')"/>
                            <strong class="px-2">:</strong>
                            Print Time
                            <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%H:%M:%S')"/>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>
